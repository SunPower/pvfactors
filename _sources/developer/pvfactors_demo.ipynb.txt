{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "VF Model: Jupyter notebook guide\n",
    "================================\n",
    "\n",
    "Updated on 1/23/2018 by Marc Anoma"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "This Jupyter notebook demonstrates how to use the package for irradiance calculations."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<h3>Imports and settings</h3>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING:Fiona:PROJ data files not located, PROJ_LIB not set\n"
     ]
    }
   ],
   "source": [
    "# Import external libraries\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "from datetime import datetime\n",
    "import pandas as pd\n",
    "\n",
    "# Import class from package\n",
    "from pvfactors.pvarray import Array\n",
    "from pvfactors.tools import (plot_surface_registry, \n",
    "                            calculate_radiosities_serially_perez)\n",
    "\n",
    "# Settings\n",
    "% matplotlib inline\n",
    "np.set_printoptions(precision=3, linewidth=300)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Create PV Array of 3 rows"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We provide 2 examples for creating PV arrays.\n",
    "\n",
    "* one where the PV array is created with continuous array surfaces\n",
    "* and one where we discretize the front surface of the middle PV row"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Arguments\n",
    "arguments = {\n",
    "    'n_pvrows': 3,\n",
    "    'pvrow_height': 1.75,\n",
    "    'pvrow_width': 2.44,\n",
    "    'array_azimuth': 90.,  # south-north oriented torque-tubes\n",
    "    'array_tilt': 20.,  # positive rotation angles in the east\n",
    "    'gcr': 0.4,\n",
    "    'solar_zenith': 20.,\n",
    "    'solar_azimuth': 90.,  # sun located in the east\n",
    "    'rho_ground': 0.2,\n",
    "    'rho_front_pvrow': 0.01,\n",
    "    'rho_back_pvrow': 0.03\n",
    "}"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Create array object\n",
    "array_simple = Array(**arguments)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\nOA7ombfjQM88AAAAdIwz8wAAANAxwvwsVdV/r6obquorVfWhqlo5zXK3V9VXq+qaqtqw0HUyP6rq\n/Kq6sao18MZ5AAAIUklEQVRurqpfnWL+QVV1SX/+lVW1ZuGrZL5U1clV9amq+lpVXVdVr5timfOq\namv///41VfXfBlEr82tfY3z1/I/+WPCVqvreQdTJ/Kmqsyb9P7+mqh6oql/aYxnjwSJTVe+tqnuq\n6tpJ01ZV1WVVdVP/58g0676iv8xNVfWKhauauTbNcSAjLDHTHAdvrapvThr3f2SadfeaKWZcg8vs\nZ6eqnp/kn1prY1X1jiRprf3fUyx3e5K1rTXfLblIVNWyJBuT/FCSO5N8MclLW2tfm7TMLyR5Ymvt\n56vqJUle3Fr7DwMpmDlXVccnOb61dnVVHZ7kqiQ/uscxcF6SN7bW1g2oTBbAvsb4/ov3f0nyI0me\nluQPW2tPW7gKWUj914dvJnlaa+2OSdPPi/FgUamq70+yPclftNae0J/2ziSbW2u/3X9TPrLne8Oq\nWpVkQ5K1SVp6rx9Pbq1tWdB/AHNimuNARlhipjkO3ppke2vtd/ay3j4zxUw5Mz9LrbVPttbG+n9+\nPslJg6yHBfXUJDe31m5tre1M8r+TvGiPZV6U5H393/8myfOqqhawRuZRa21Ta+3q/u/bklyf5MTB\nVsWQelF6L+6ttfb5JCv7HwaxOD0vyS2TgzyLU2vt00k27zF58mv/+5L86BSr/nCSy1prm/sB/rIk\n589bocyrqY4DGWHpmWY8mImZZIoZEeYfmZ9J8rFp5rUkn6yqq6rqggWsiflzYpJvTPr7znx3kNu9\nTH9A35rkqAWpjgXVb6E4N8mVU8x+elV9uao+VlWPX9DCWCj7GuNnMl6weLwkyQemmWc8WPyOa61t\n6v9+V5LjpljGmLC0yAhL22v77RbvnabtZs7Gg+X7s9JiV1X/kGT1FLPe0lr7u/4yb0kyluT902zm\nWa21b1bVsUkuq6ob+p/eAB1XVYcl+dskv9Rae2CP2VcnObW1tr1/qfWHk5yx0DUy74zxJEmq6sAk\nL0zypilmGw+WmNZaqyo9rEuYjLDk/WmSt6f3oc3bk/xueh/uzAtn5qfQWvvB1toTpnhMBPlXJlmX\n5D+2aW460Fr7Zv/nPUk+lN7lFHTbN5OcPOnvk/rTplymqpYnOTLJ/QtSHQuiqlakF+Tf31r74J7z\nW2sPtNa293//aJIVVXX0ApfJPJvBGD+T8YLF4QVJrm6t3b3nDOPBknH3RBtN/+c9UyxjTFgCZARa\na3e31na11saTvCtTP79zNh4I87NUVecn+ZUkL2ytPTjNMof2b46Vqjo0yfOTXDvVsnTKF5OcUVWn\n9c/EvCTJR/ZY5iNJJu5Q+xPp3QjFJ/SLRP/+B+9Jcn1r7femWWb1xH0Squqp6Y2zPtBZRGY4xn8k\nycur5/uSbJ10GS6Ly0szzSX2xoMlY/Jr/yuS/N0Uy3wiyfOraqR/2e3z+9NYJGQEkt0f6E14caZ+\nfmeSKWbEZfaz90dJDkrvspgk+Xz/zuUnJHl3a+1H0uuV+lB//vIkf9Va+/igCmZu9O9O+tr0XnyX\nJXlva+26qvqNJBtaax9JL+hdXFU3p3dDjJcMrmLmwTOTrE/y1aq6pj/tzUlOSZLW2v9K70Oc/1RV\nY0m+neQlPtBZdKYc46vq55Pdx8FH07uT/c1JHkzyqgHVyjzqvxn/oSQ/N2na5OPAeLDIVNUHkpyX\n5OiqujPJryf57SR/XVWvTnJHkp/qL7s2yc+31l7TWttcVW9P7018kvxGa21/bpzFEJjmOHhTZIQl\nZZrj4LyqelJ6l9nfnv7rw+TjYLpMsV81eE0BAACAbnGZPQAAAHSMMA8AAAAdI8wDAABAxwjzAAAA\n0DHCPAAAAHSMMA8AfJeqans8Vs/jvt64x74umq99AcBi4XvmAYDp3JHkov7v2+dxP1ckeVuSlUle\nN4/7AYBFw/fMAwDfpapakn9prZ23gPtck+S2JO9rrb1yofYLAF3kMnsAAADoGGEeABaJqvpwv+f8\nF6eY9/b+vPfMwX7WTPS2V9XpVfU3VXV/VW2rqk9W1RP6yx1TVRdW1aaq2lFVX6yq5zzS/QMAwjwA\nLCY/k+TrSd5ZVedOTKyq5yV5c5KvJfkvc7i/NUmuTHJcer31n0zyg0n+uarOSPL5JE9JckmSv05y\nTpKPVdUpc1gDACxJwjwALBKttc1JXppkWZJLquqwqjouyV8m+U6Sn2qtPTiHu/yBJL/fWnt2a+0N\nrbUfT/LrSY5KL+RfluTJrbVfaq29PMmrkxyU5JfnsAYAWJKEeQBYRFprVyT5r0nOSPJnSS5OsjrJ\nL7bWrpvj3d2e5Lf3mPa+/s+DkvxfrbXxSfP+KslYkifNcR0AsOT4ajoAWHzekeQ5SX66//cHWmvv\nnof9XNNa27XHtG/1f25srW2bPKO1tquq7k5y0jzUAgBLijPzALDItN73zn5w0qQ/mKddbZ1i32PT\nzesbS7JinuoBgCVDmAeARaZ/87nfSbIlyXiSd1fVowZbFQAwl4R5AFhEquqg9O4ef2iS/5Dkt5J8\nT+bv7DwAMADCPAAsLr+T5Nwk72ytXZbe3eUvT/JzVfWTA60MAJgzwjwALBJV9eIkr03va+F+Lend\ndC69r6vbnN7l9o8eXIUAwFwR5gFgEaiqU5K8J70bz71k0o3o0lr7RpKfSXJEkv9dVQcOpkoAYK74\najoAWARaa19Psmov8/8uSc3Rvm7f27Zaa3ubt2YuagCApc6ZeQBgOj9QVa3/WD1fO6mqN1ZVS3Lb\nfO0DABYbZ+YBgKm8bY+/t8/jvq7YY3/XzOO+AGBRqNbaoGsAAAAAZsFl9gAAANAxwjwAAAB0jDAP\nAAAAHSPMAwAAQMcI8wAAANAxwjwAAAB0jDAPAAAAHfP/A/4+6RHU9amxAAAAAElFTkSuQmCC\n",
      "text/plain": [
       "<matplotlib.figure.Figure at 0xd2ae2e8>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Plot the PV array geometry\n",
    "f, ax = plt.subplots(figsize=(17, 5))\n",
    "plot_surface_registry(ax, array_simple)\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Discretize the front surface of middle tracker into 5 segments"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Add discretization option into arguments\n",
    "arguments_discretize = arguments.copy()\n",
    "arguments_discretize['cut'] = [(1, 5, 'front')]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Create array object\n",
    "array_discretized = Array(**arguments_discretize)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAA/MAAAFbCAYAAACZLN4JAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz\nAAALEgAACxIB0t1+/AAAIABJREFUeJzt3XmYZXddJ/73p7urQ7bu6nRWkpCGQBIWDUizgwZRjNoi\nqCjwo1hEo+M4owI/fwLOCPJzVMZ1Rmc0AoIRMS5sRvYBBBK2TgiSkKSzh5A93dULodNdXd/5495q\nOk1Vd1WnlnuqXq/nuU9VnXPuPZ9+6vS37vue8znfaq0FAAAA6I5lC10AAAAAMDPCPAAAAHSMMA8A\nAAAdI8wDAABAxwjzAAAA0DHCPAAAAHSMMA8AAAAdI8wDwICoqrbfY09V3VNVn6iql+yz3bv6639p\nGq/50f62L5hhLW/Yp44zD+XfAwDMnWqtLXQNAEB6Yb7/7Zv6X4eSnJXkx5MsT/LHrbVXV9U5ST6Z\n5Mutte85wOutS3JDkjuSPKy1NjbNOqr/vNOSVJI/bK29dqb/HgBg7gjzADAgJsJ8a632W/6cJB/r\n//iI1tpNVXVNkjOSPLG1dtkUr/fmJL+Z5L+11t4wgzp+KMmHk7wjyblJViQ5ubW2a2b/IgBgrrjM\nHgAGXGvt/yS5Or2z5E/qL/6r/tefn+w5VbU8ySuTtCRvneEuJ17zr5K8K8mxSSa9TL+q3ti/FP+c\nqnpJVX2hqnZU1U399ev6699RVWdU1YVVdVdVjfevMEhVPbGq/rSqvlJVm6tqZ1VdW1V/WFVr9tvf\nL/Rf77emqOfEqtpdVV+d4b8ZADpFmAeAbpg4Wz9xSd07k+xK8uKqOmKS7X84yclJPt5au3HaO6k6\nIcnzkmxqrV2S3tn5JDnvIE99TZK3J7klyZ8l+dB+609P8oUk69L7gOD8JNv6634+yYuSXJPkr5P8\n7yS3J3l1kour6uh9Xudd/ee9qv+Bxf5+Nr0rCf7yIPUCQKetWOgCAIADq6ofSHJmekH+S0nSWru7\nqt6X5Kf7j3fs97SJs+vnz3B3r0yvV/8d/f1cUVWXJnl2VT2ytXbdFM/7/iRPa619eYr1z0zyu621\n10+y7neT/MfW2p59F1bVq9K7quCXkvx+v54dVXVBkv+Y3gcWF+2zfSX5uST3JblgGv9WAOgsZ+YB\nYMD0L11/Y1X9TlX9U3r965XkT1prN++z6URQ/7n9nn9Skh9JcleS989gvxNheDzJ3+yz6h39/U96\n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\nWlWXV9XG+a6TuVFV51bVNVV1XVX9xiTrD6uqC/vrv1BV6+a/SuZKVZ1aVZ+sqq9V1ZVV9SuTbHNO\nVW3t/9+/vKr+60LUytw62BhfPf+jPxb8e1V9z0LUydypqjP3+X9+eVVtq6pf3W8b48EiU1Vvr6q7\nquqKfZYdU1Ufq6pr+1/XTPHcl/e3ubaqXj5/VTPbpjgOZIQlZorj4I1V9Y19xv0fmeK5B8wU067B\nZfYzU1XPTfKJ1tpYVf1+krTW/r9JtrspyfrWmrklF4mqWp5kU5IfTHJrki8leXFr7Wv7bPNLSb67\ntfaLVfWiJC9orf3MghTMrKuqk5Kc1Fq7rKqOTnJpkufvdwyck+S1rbUNC1Qm8+BgY3z/j/d/SvIj\nSZ6S5E9ba0+ZvwqZT/2/D99I8pTW2s37LD8nxoNFpaq+N8mOJH/TWntcf9lbkmxurf1e/035mv3f\nG1bVMUk2JlmfpKX39+OJrbUt8/oPYFZMcRzICEvMFMfBG5PsaK39wQGed9BMMV3OzM9Qa+2jrbWx\n/o+fT3LKQtbDvHpykutaaze01nYl+fskP77fNj+e5J397/8pyXOqquaxRuZQa+321tpl/e+3J7kq\nyckLWxUD6sfT++PeWmufTzLc/zCIxek5Sa7fN8izOLXWPp1k836L9/3b/84kz5/kqT+U5GOttc39\nAP+xJOfOWaHMqcmOAxlh6ZliPJiO6WSKaRHmH5yfTfKhKda1JB+tqkur6rx5rIm5c3KSr+/z8635\nziC3d5v+gL41ydp5qY551W+heEKSL0yy+mlV9ZWq+lBVPXZeC2O+HGyMn854weLxoiTvnmKd8WDx\nO6G1dnv/+zuSnDDJNsaEpUVGWNp+ud9u8fYp2m5mbTxYcShPWuyq6uNJTpxk1Rtaa+/vb/OGJGNJ\n3jXFyzyztfaNqjo+yceq6ur+pzdAx1XVUUn+Ocmvtta27bf6siSntdZ29C+1fl+SR813jcw5YzxJ\nkqpameR5SV43yWrjwRLTWmtVpYd1CZMRlrz/neTN6X1o8+Ykf5jehztzwpn5SbTWfqC19rhJHhNB\n/hVJNiT5f9oUNx1orX2j//WuJO9N73IKuu0bSU7d5+dT+ssm3aaqViRZneTeeamOeVFVQ+kF+Xe1\n1t6z//rW2rbW2o7+9x9MMlRVx85zmcyxaYzx0xkvWBx+OMllrbU7919hPFgy7pxoo+l/vWuSbYwJ\nS4CMQGvtztbantbaeJK/yuS/31kbD4T5Gaqqc5P8epLntdbum2KbI/s3x0pVHZnkuUmumGxbOuVL\nSR5VVQ/vn4l5UZIP7LfNB5JM3KH2p9K7EYpP6BeJ/v0P3pbkqtbaH02xzYkT90moqienN876QGcR\nmeYY/4EkL6uepybZus9luCwuL84Ul9gbD5aMff/2vzzJ+yfZ5iNJnltVa/qX3T63v4xFQkYg2fuB\n3oQXZPLf73QyxbS4zH7m/izJYeldFpMkn+/fufyhSd7aWvuR9Hql3ttfvyLJ37XWPrxQBTM7+ncn\n/eX0/vguT/L21tqVVfXbSTa21j6QXtC7oKquS++GGC9auIqZA89IMpLkq1V1eX/Z65M8LElaa3+R\n3oc4/6GqxpJ8K8mLfKCz6Ew6xlfVLyZ7j4MPpncn++uS3JfklQtUK3Oo/2b8B5P8wj7L9j0OjAeL\nTFW9O8k5SY6tqluT/FaS30vyD1X1qiQ3J/np/rbrk/xia+3nWmubq+rN6b2JT5Lfbq0dyo2zGABT\nHAevi4ywpExxHJxTVY9P7zL7m9L/+7DvcTBVpjikGvxNAQAAgG5xmT0AAAB0jDAPAAAAHSPMAwAA\nQMcI8wAAANAxwjwAAAB0jDAPAHyHqmr7PU6cw329dr99vWOu9gUAi4V55gGAqdyc5B3973fM4X4u\nSfKmJMNJfmUO9wMAi4Z55gGA71BVLcm/tdbOmcd9rktyY5J3ttZeMV/7BYAucpk9AAAAdIwwDwCL\nRFW9r99z/p8nWffm/rq3zcJ+1k30tlfV6VX1T1V1b1Vtr6qPVtXj+tsdV1XnV9XtVbWzqr5UVc9+\nsPsHAIR5AFhMfjbJLUneUlVPmFhYVc9J8vokX0vyn2Zxf+uSfCHJCen11n80yQ8k+VRVPSrJ55M8\nKcmFSf4hydlJPlRVD5vFGgBgSRLmAWCRaK1tTvLiJMuTXFhVR1XVCUn+Nsn9SX66tXbfLO7y+5L8\ncWvtWa2117TWfjLJbyVZm17I/1iSJ7bWfrW19rIkr0pyWJJfm8UaAGBJEuYBYBFprV2S5L8keVSS\nv0xyQZITk/zn1tqVs7y7m5L83n7L3tn/eliS/7e1Nr7Pur9LMpbk8bNcBwAsOaamA4DF5/eTPDvJ\nS/o/v7u19tY52M/lrbU9+y27rf91U2tt+74rWmt7qurOJKfMQS0AsKQ4Mw8Ai0zrzTv7nn0W/ckc\n7WrrJPsem2pd31iSoTmqBwCWDGEeABaZ/s3n/iDJliTjSd5aVQ9Z2KoAgNkkzAPAIlJVh6V39/gj\nk/xMkt9N8l2Zu7PzAMACEOYBYHH5gyRPSPKW1trH0ru7/MVJfqGqXriglQEAs0aYB4BFoqpekOSX\n05sW7jeT3k3n0puubnN6l9s/YuEqBABmizAPAItAVT0sydvSu/Hci/a5EV1aa19P8rNJViX5+6pa\nuTBVAgCzxdR0ALAItNZuSXLMAda/P0nN0r5uOtBrtdYOtG7dbNQAAEudM/MAwFS+r6pa/3HiXO2k\nql5bVS3JjXO1DwBYbJyZBwAm86b9ft4xh/u6ZL/9XT6H+wKARaFaawtdAwAAADADLrMHAACAjhHm\nAQAAoGOEeQAAAOgYYR4AAAA6RpgHAACAjhHmAQAAoGOEeQAAAOiY/wvqVp2pA23dHAAAAABJRU5E\nrkJggg==\n",
      "text/plain": [
       "<matplotlib.figure.Figure at 0x46e3198>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Plot the PV array geometry\n",
    "f, ax = plt.subplots(figsize=(17, 5))\n",
    "plot_surface_registry(ax, array_discretized)\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The PV array and solar angles can be updated as follows:<br>\n",
    "For example, we can rotate the array to -20 degrees"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [],
   "source": [
    "solar_zenith = 20.\n",
    "solar_azimuth = 90.\n",
    "array_tilt = -20.\n",
    "array_azimuth = 90.\n",
    "array_discretized.update_view_factors(solar_zenith, solar_azimuth, \n",
    "                                      array_tilt, array_azimuth)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\npx87nBXHLcp8/fVAB23bti033HF//vWGe3LjHbuYv15/PTAAxttff+qRC/LsUw7J4oP2meYK2RsI\n8zBNxttff9yyA/MM/fVAh23tz19/+Rjz1yff76//t898LJ/+yPsysn79I7fxm8Me6Irx9tcvXbBv\nnnbswvynExdnf/31TBJhHmbA9/vrN2bjA1tG3UZ/PTAIts9fP1p//caNG7Jp00N5eOuWjNx5S/79\n7z6UdWu+kfPPP1+gBzrnkf76b9+b29aP/kGm/nomkzAPM2y3/fVJlhysvx7ovp3769euvTstlfn7\nHpAk2brlody//s7cfeMV+Zs/fbf+eqCzNvb766/WX88UEuZhltBfD+wttvfX/8Kv/34OP+n07HfQ\n4lSSrZs35eGHe3crLV26VH89MBD01zNVhHmYhSbSX3/WiYtysv56oIOGh4ezceP9edJzfirLTzsn\nBx9yRGru3MypypIlhz6ynfnrgUGgv57JJszDLDee/voD952XU444KM8+ZYn+eqAzVq5cmVWrVmXL\nlt7YNn//g/OkZ/94nvbcH8/CZUftcv76Z5y4OCcebv56oJvG219/1JL9c6b+esYgzEOH3HjHfbns\nhntyw+3664HBsHLlylxyySUZGRl51NPsxzt//ROPWJBnnXxIli7UXw9008Yd5q9fp7+eCRDmoYO2\n99dffvP6rNFfDwywicxf/5TlC/PMkw7RXw901m33PJAvX78u1916X+7XX89uCPPQcfrrgb1Fb/76\ne3P5zet3O3+9/nqgy/TXMx7CPAyQifTXP+vkJTl8kf56oJvu37Q1l16/Llff8tj567fbZ2hO7rjx\nynz5Ex/KTVd9+VG38QN0hf56xiLMw4AaT3/9IQfvk6ccvSBnn7Q4B+8/f5orBJgcY/XXb9y4IZse\n2px58/fNlk3fy42XfzY3XvqJvPC5zxTogU7SX8+OhHkYcOPtrz9i0X5ZcZz+eqC7du6vv+2OO1Nz\nhzJvqNdTuuWhB7Pt4a353vrb8wsvP1d/PdBpE+mvf+bJi7PkYA8KHTTCPOxFHti0NZf1++vv1F8P\nDLCtW7fllLN/NCed/aIcesyTk0q2bnowrT/wLT10aa+//pD9s+K44Zx+3LD+eqCTtm3blm/ddl++\nesM9ufmu7436oFD99YNJmIe9lP56YNANDw9nZGQk8/c/OCed/aIc89Tn5OAlR2TOnMqSJYc+att9\n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\n",
      "text/plain": [
       "<matplotlib.figure.Figure at 0x21674a20>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Plot the PV array geometry\n",
    "f, ax = plt.subplots(figsize=(17,5))\n",
    "plot_surface_registry(ax, array_discretized)\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Direct shading: still in development"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We can also look at cases of direct shading, but that part needs more development."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [],
   "source": [
    "solar_zenith = 80.\n",
    "solar_azimuth = 90.\n",
    "array_tilt = 70.\n",
    "array_azimuth = 90.\n",
    "array_simple.update_view_factors(solar_zenith, solar_azimuth, \n",
    "                                 array_tilt, array_azimuth)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<matplotlib.figure.Figure at 0x46e3710>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Plot the PV array geometry\n",
    "f, ax = plt.subplots(figsize=(17,5))\n",
    "plot_surface_registry(ax, array_simple)\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We can see in the figure above that the middle and the right trackers are undergoing some row-to-row shading"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Surface Registry"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The surface registry of the array contains all the info necessary for the calculations, including the ``shapely`` geometries.<br>\n",
    "The user can for instance select elements of the PV array by filtering on \"line_type\" (PV row or ground surface), \"shaded\" (is the surface shaded?), \"surface_side\" (which side of the surface), etc."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style>\n",
       "    .dataframe thead tr:only-child th {\n",
       "        text-align: right;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: left;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>line_registry_index</th>\n",
       "      <th>pvrow_index</th>\n",
       "      <th>geometry</th>\n",
       "      <th>style</th>\n",
       "      <th>shaded</th>\n",
       "      <th>line_type</th>\n",
       "      <th>edge_point</th>\n",
       "      <th>surface_side</th>\n",
       "      <th>irradiance_term</th>\n",
       "      <th>reflectivity</th>\n",
       "      <th>q0</th>\n",
       "      <th>qinc</th>\n",
       "      <th>area</th>\n",
       "      <th>index_pvrow_neighbor</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>LINESTRING (-0.4172645748573156 0.603575002641...</td>\n",
       "      <td>-</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>POINT (-0.6369479099658538 0)</td>\n",
       "      <td>front</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2.440000</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>LINESTRING (6.149389561651357 1.88569670539386...</td>\n",
       "      <td>-</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>POINT (5.463052090034146 0)</td>\n",
       "      <td>front</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1.075595</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>LINESTRING (12.24938956165136 1.88569670539386...</td>\n",
       "      <td>-</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>POINT (11.56305209003415 0)</td>\n",
       "      <td>front</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1.075595</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>3</td>\n",
       "      <td>None</td>\n",
       "      <td>LINESTRING (3.005779364397384 0, 5.46305209003...</td>\n",
       "      <td>-</td>\n",
       "      <td>True</td>\n",
       "      <td>ground</td>\n",
       "      <td>NaN</td>\n",
       "      <td>front</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2.457273</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>4</td>\n",
       "      <td>None</td>\n",
       "      <td>LINESTRING (-100 0, -0.6369479099658548 0)</td>\n",
       "      <td>-</td>\n",
       "      <td>False</td>\n",
       "      <td>ground</td>\n",
       "      <td>NaN</td>\n",
       "      <td>front</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>99.363052</td>\n",
       "      <td>NaN</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   line_registry_index pvrow_index  \\\n",
       "0                    0           0   \n",
       "1                    1           1   \n",
       "2                    2           2   \n",
       "3                    3        None   \n",
       "4                    4        None   \n",
       "\n",
       "                                            geometry style shaded line_type  \\\n",
       "0  LINESTRING (-0.4172645748573156 0.603575002641...     -  False     pvrow   \n",
       "1  LINESTRING (6.149389561651357 1.88569670539386...     -  False     pvrow   \n",
       "2  LINESTRING (12.24938956165136 1.88569670539386...     -  False     pvrow   \n",
       "3  LINESTRING (3.005779364397384 0, 5.46305209003...     -   True    ground   \n",
       "4         LINESTRING (-100 0, -0.6369479099658548 0)     -  False    ground   \n",
       "\n",
       "                      edge_point surface_side  irradiance_term  reflectivity  \\\n",
       "0  POINT (-0.6369479099658538 0)        front              NaN           NaN   \n",
       "1    POINT (5.463052090034146 0)        front              NaN           NaN   \n",
       "2    POINT (11.56305209003415 0)        front              NaN           NaN   \n",
       "3                            NaN        front              NaN           NaN   \n",
       "4                            NaN        front              NaN           NaN   \n",
       "\n",
       "   q0  qinc       area  index_pvrow_neighbor  \n",
       "0 NaN   NaN   2.440000                   NaN  \n",
       "1 NaN   NaN   1.075595                   0.0  \n",
       "2 NaN   NaN   1.075595                   1.0  \n",
       "3 NaN   NaN   2.457273                   NaN  \n",
       "4 NaN   NaN  99.363052                   NaN  "
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "array_simple.surface_registry.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## View factor matrix"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The view factor matrix of the array is automatically calculated when the array is created or updated."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "array([[ 0.   ,  0.   ,  0.   ,  0.   ,  0.321,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.679],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.088,  0.029,  0.   ,  0.098,  0.   ,  0.   ,  0.   ,  0.   ,  0.155,  0.   ,  0.   ,  0.   ,  0.   ,  0.63 ],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.028,  0.   ,  0.   ,  0.   ,  0.186,  0.   ,  0.   ,  0.   ,  0.   ,  0.078,  0.   ,  0.078,  0.   ,  0.63 ],\n",
       "       [ 0.   ,  0.039,  0.012,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.09 ,  0.012,  0.102,  0.   ,  0.   ,  0.   ,  0.   ,  0.745],\n",
       "       [ 0.008,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.001,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.991],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.001,  0.   ,  0.001,  0.999],\n",
       "       [ 0.   ,  0.029,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.031,  0.004,  0.279,  0.   ,  0.   ,  0.   ,  0.   ,  0.657],\n",
       "       [ 0.   ,  0.   ,  0.033,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.055,  0.02 ,  0.081,  0.   ,  0.126,  0.   ,  0.684],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.003,  0.037,  0.004,  0.05 ,  0.905],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.162,  0.038,  0.   ,  0.083,  0.   ,  0.   ,  0.   ,  0.   ,  0.188,  0.   ,  0.   ,  0.   ,  0.   ,  0.528],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.022,  0.005,  0.   ,  0.012,  0.245,  0.   ,  0.   ,  0.   ,  0.   ,  0.09 ,  0.   ,  0.098,  0.   ,  0.528],\n",
       "       [ 0.   ,  0.068,  0.   ,  0.103,  0.   ,  0.   ,  0.416,  0.051,  0.003,  0.105,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.253],\n",
       "       [ 0.   ,  0.   ,  0.078,  0.   ,  0.   ,  0.   ,  0.   ,  0.46 ,  0.056,  0.   ,  0.114,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.293],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.056,  0.   ,  0.   ,  0.602,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.342],\n",
       "       [ 0.   ,  0.   ,  0.061,  0.   ,  0.   ,  0.001,  0.   ,  0.565,  0.052,  0.   ,  0.098,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.222],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.028,  0.   ,  0.   ,  0.636,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.336],\n",
       "       [ 0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ,  0.   ]])"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Calculate matrix\n",
    "array_simple.vf_matrix"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The view matrix lines and columns can be labeled using the surface registry"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style>\n",
       "    .dataframe thead tr:only-child th {\n",
       "        text-align: right;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: left;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>pvrow_0_front</th>\n",
       "      <th>pvrow_1_front</th>\n",
       "      <th>pvrow_2_front</th>\n",
       "      <th>ground_0_front</th>\n",
       "      <th>ground_1_front</th>\n",
       "      <th>ground_2_front</th>\n",
       "      <th>ground_3_front</th>\n",
       "      <th>ground_4_front</th>\n",
       "      <th>ground_5_front</th>\n",
       "      <th>pvrow_1_front</th>\n",
       "      <th>pvrow_2_front</th>\n",
       "      <th>pvrow_0_back</th>\n",
       "      <th>pvrow_1_back</th>\n",
       "      <th>pvrow_2_back</th>\n",
       "      <th>pvrow_1_back</th>\n",
       "      <th>pvrow_2_back</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>pvrow_0_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.320807</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_1_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.088091</td>\n",
       "      <td>0.028697</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.098204</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.155105</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_2_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.028318</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000379</td>\n",
       "      <td>0.186295</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.077596</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.077509</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ground_0_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.038559</td>\n",
       "      <td>0.012395</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.090091</td>\n",
       "      <td>0.011945</td>\n",
       "      <td>0.102125</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ground_1_front</th>\n",
       "      <td>0.007878</td>\n",
       "      <td>0.000311</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000525</td>\n",
       "      <td>0.000070</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ground_2_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000011</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000847</td>\n",
       "      <td>0.000018</td>\n",
       "      <td>0.000541</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ground_3_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.028997</td>\n",
       "      <td>0.000112</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.031108</td>\n",
       "      <td>0.004332</td>\n",
       "      <td>0.278817</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ground_4_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.032849</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.054868</td>\n",
       "      <td>0.020334</td>\n",
       "      <td>0.081169</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.126470</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>ground_5_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000403</td>\n",
       "      <td>0.003424</td>\n",
       "      <td>0.037058</td>\n",
       "      <td>0.004042</td>\n",
       "      <td>0.049657</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_1_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.162252</td>\n",
       "      <td>0.038206</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.083054</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.188039</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_2_front</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.021514</td>\n",
       "      <td>0.005133</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.011564</td>\n",
       "      <td>0.245306</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.089807</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.098231</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_0_back</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.068373</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.102848</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000307</td>\n",
       "      <td>0.416251</td>\n",
       "      <td>0.050835</td>\n",
       "      <td>0.002887</td>\n",
       "      <td>0.105148</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_1_back</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.077596</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.460332</td>\n",
       "      <td>0.055650</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.113922</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_2_back</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.055848</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.602271</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_1_back</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.061102</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000960</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.565426</td>\n",
       "      <td>0.051783</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.098231</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pvrow_2_back</th>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.028140</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.636202</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                pvrow_0_front  pvrow_1_front  pvrow_2_front  ground_0_front  \\\n",
       "pvrow_0_front        0.000000       0.000000       0.000000        0.000000   \n",
       "pvrow_1_front        0.000000       0.000000       0.000000        0.088091   \n",
       "pvrow_2_front        0.000000       0.000000       0.000000        0.028318   \n",
       "ground_0_front       0.000000       0.038559       0.012395        0.000000   \n",
       "ground_1_front       0.007878       0.000311       0.000000        0.000000   \n",
       "ground_2_front       0.000000       0.000000       0.000000        0.000000   \n",
       "ground_3_front       0.000000       0.028997       0.000112        0.000000   \n",
       "ground_4_front       0.000000       0.000000       0.032849        0.000000   \n",
       "ground_5_front       0.000000       0.000000       0.000000        0.000000   \n",
       "pvrow_1_front        0.000000       0.000000       0.000000        0.162252   \n",
       "pvrow_2_front        0.000000       0.000000       0.000000        0.021514   \n",
       "pvrow_0_back         0.000000       0.068373       0.000000        0.102848   \n",
       "pvrow_1_back         0.000000       0.000000       0.077596        0.000000   \n",
       "pvrow_2_back         0.000000       0.000000       0.000000        0.000000   \n",
       "pvrow_1_back         0.000000       0.000000       0.061102        0.000000   \n",
       "pvrow_2_back         0.000000       0.000000       0.000000        0.000000   \n",
       "\n",
       "                ground_1_front  ground_2_front  ground_3_front  \\\n",
       "pvrow_0_front         0.320807        0.000000        0.000000   \n",
       "pvrow_1_front         0.028697        0.000000        0.098204   \n",
       "pvrow_2_front         0.000000        0.000000        0.000379   \n",
       "ground_0_front        0.000000        0.000000        0.000000   \n",
       "ground_1_front        0.000000        0.000000        0.000000   \n",
       "ground_2_front        0.000000        0.000000        0.000000   \n",
       "ground_3_front        0.000000        0.000000        0.000000   \n",
       "ground_4_front        0.000000        0.000000        0.000000   \n",
       "ground_5_front        0.000000        0.000000        0.000000   \n",
       "pvrow_1_front         0.038206        0.000000        0.083054   \n",
       "pvrow_2_front         0.005133        0.000000        0.011564   \n",
       "pvrow_0_back          0.000000        0.000307        0.416251   \n",
       "pvrow_1_back          0.000000        0.000000        0.000000   \n",
       "pvrow_2_back          0.000000        0.055848        0.000000   \n",
       "pvrow_1_back          0.000000        0.000960        0.000000   \n",
       "pvrow_2_back          0.000000        0.028140        0.000000   \n",
       "\n",
       "                ground_4_front  ground_5_front  pvrow_1_front  pvrow_2_front  \\\n",
       "pvrow_0_front         0.000000        0.000000       0.000000       0.000000   \n",
       "pvrow_1_front         0.000000        0.000000       0.000000       0.000000   \n",
       "pvrow_2_front         0.186295        0.000000       0.000000       0.000000   \n",
       "ground_0_front        0.000000        0.000000       0.090091       0.011945   \n",
       "ground_1_front        0.000000        0.000000       0.000525       0.000070   \n",
       "ground_2_front        0.000000        0.000000       0.000000       0.000000   \n",
       "ground_3_front        0.000000        0.000000       0.031108       0.004332   \n",
       "ground_4_front        0.000000        0.000000       0.000000       0.054868   \n",
       "ground_5_front        0.000000        0.000000       0.000000       0.000000   \n",
       "pvrow_1_front         0.000000        0.000000       0.000000       0.000000   \n",
       "pvrow_2_front         0.245306        0.000000       0.000000       0.000000   \n",
       "pvrow_0_back          0.050835        0.002887       0.105148       0.000000   \n",
       "pvrow_1_back          0.460332        0.055650       0.000000       0.113922   \n",
       "pvrow_2_back          0.000000        0.602271       0.000000       0.000000   \n",
       "pvrow_1_back          0.565426        0.051783       0.000000       0.098231   \n",
       "pvrow_2_back          0.000000        0.636202       0.000000       0.000000   \n",
       "\n",
       "                pvrow_0_back  pvrow_1_back  pvrow_2_back  pvrow_1_back  \\\n",
       "pvrow_0_front       0.000000      0.000000      0.000000      0.000000   \n",
       "pvrow_1_front       0.155105      0.000000      0.000000      0.000000   \n",
       "pvrow_2_front       0.000000      0.077596      0.000000      0.077509   \n",
       "ground_0_front      0.102125      0.000000      0.000000      0.000000   \n",
       "ground_1_front      0.000000      0.000000      0.000000      0.000000   \n",
       "ground_2_front      0.000011      0.000000      0.000847      0.000018   \n",
       "ground_3_front      0.278817      0.000000      0.000000      0.000000   \n",
       "ground_4_front      0.020334      0.081169      0.000000      0.126470   \n",
       "ground_5_front      0.000403      0.003424      0.037058      0.004042   \n",
       "pvrow_1_front       0.188039      0.000000      0.000000      0.000000   \n",
       "pvrow_2_front       0.000000      0.089807      0.000000      0.098231   \n",
       "pvrow_0_back        0.000000      0.000000      0.000000      0.000000   \n",
       "pvrow_1_back        0.000000      0.000000      0.000000      0.000000   \n",
       "pvrow_2_back        0.000000      0.000000      0.000000      0.000000   \n",
       "pvrow_1_back        0.000000      0.000000      0.000000      0.000000   \n",
       "pvrow_2_back        0.000000      0.000000      0.000000      0.000000   \n",
       "\n",
       "                pvrow_2_back  \n",
       "pvrow_0_front       0.000000  \n",
       "pvrow_1_front       0.000000  \n",
       "pvrow_2_front       0.000000  \n",
       "ground_0_front      0.000000  \n",
       "ground_1_front      0.000000  \n",
       "ground_2_front      0.000541  \n",
       "ground_3_front      0.000000  \n",
       "ground_4_front      0.000000  \n",
       "ground_5_front      0.049657  \n",
       "pvrow_1_front       0.000000  \n",
       "pvrow_2_front       0.000000  \n",
       "pvrow_0_back        0.000000  \n",
       "pvrow_1_back        0.000000  \n",
       "pvrow_2_back        0.000000  \n",
       "pvrow_1_back        0.000000  \n",
       "pvrow_2_back        0.000000  "
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create labels for the matrix\n",
    "registry = array_simple.surface_registry\n",
    "registry.loc[registry.line_type == 'ground', 'pvrow_index'] = range(\n",
    "    registry.loc[registry.line_type == 'ground', :].shape[0])\n",
    "labels = (registry.line_type.values + \"_\" + \n",
    "          registry.pvrow_index.values.astype(str) + \"_\" + \n",
    "          registry.surface_side.values)\n",
    "\n",
    "# Show the matrix with labels\n",
    "labeled_vf_matrix = pd.DataFrame(array_simple.vf_matrix[:-1, :-1], \n",
    "                                 index=labels, columns=labels)\n",
    "labeled_vf_matrix"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Calculate radiosities for single time point and using isotropic diffuse sky dome"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Define input values for radiosity calculation\n",
    "DNI = 1000.\n",
    "DHI = 50.\n",
    "solar_zenith = 20.\n",
    "solar_azimuth = 90.\n",
    "array_tilt = -20.\n",
    "array_azimuth = 90."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [],
   "source": [
    "array_simple.calculate_radiosities_simple(solar_zenith, solar_azimuth,\n",
    "                                          array_tilt, array_azimuth,\n",
    "                                          DNI, DHI)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style>\n",
       "    .dataframe thead tr:only-child th {\n",
       "        text-align: right;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: left;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>pvrow_index</th>\n",
       "      <th>shaded</th>\n",
       "      <th>line_type</th>\n",
       "      <th>surface_side</th>\n",
       "      <th>irradiance_term</th>\n",
       "      <th>q0</th>\n",
       "      <th>qinc</th>\n",
       "      <th>isotropic_term</th>\n",
       "      <th>reflection_term</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>front</td>\n",
       "      <td>766.044443</td>\n",
       "      <td>8.168828</td>\n",
       "      <td>816.882800</td>\n",
       "      <td>47.572225</td>\n",
       "      <td>3.266131</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>front</td>\n",
       "      <td>766.044443</td>\n",
       "      <td>8.173178</td>\n",
       "      <td>817.317825</td>\n",
       "      <td>47.573077</td>\n",
       "      <td>3.700304</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>front</td>\n",
       "      <td>766.044443</td>\n",
       "      <td>8.200154</td>\n",
       "      <td>820.015392</td>\n",
       "      <td>48.657804</td>\n",
       "      <td>5.313145</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>None</td>\n",
       "      <td>True</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>5.297125</td>\n",
       "      <td>26.485623</td>\n",
       "      <td>24.658496</td>\n",
       "      <td>1.827127</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>None</td>\n",
       "      <td>True</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>5.297799</td>\n",
       "      <td>26.488993</td>\n",
       "      <td>24.815420</td>\n",
       "      <td>1.673573</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>None</td>\n",
       "      <td>True</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>5.693934</td>\n",
       "      <td>28.469672</td>\n",
       "      <td>26.933075</td>\n",
       "      <td>1.536597</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>None</td>\n",
       "      <td>False</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>939.692621</td>\n",
       "      <td>195.553701</td>\n",
       "      <td>977.768507</td>\n",
       "      <td>37.217601</td>\n",
       "      <td>0.858285</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>None</td>\n",
       "      <td>False</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>939.692621</td>\n",
       "      <td>195.651303</td>\n",
       "      <td>978.256514</td>\n",
       "      <td>37.744932</td>\n",
       "      <td>0.818961</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>None</td>\n",
       "      <td>False</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>939.692621</td>\n",
       "      <td>197.806118</td>\n",
       "      <td>989.030592</td>\n",
       "      <td>49.286484</td>\n",
       "      <td>0.051487</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>None</td>\n",
       "      <td>False</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>939.692621</td>\n",
       "      <td>197.396142</td>\n",
       "      <td>986.980708</td>\n",
       "      <td>47.067908</td>\n",
       "      <td>0.220179</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>None</td>\n",
       "      <td>False</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>939.692621</td>\n",
       "      <td>193.168551</td>\n",
       "      <td>965.842753</td>\n",
       "      <td>24.463549</td>\n",
       "      <td>1.686584</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>None</td>\n",
       "      <td>False</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>939.692621</td>\n",
       "      <td>193.376337</td>\n",
       "      <td>966.881685</td>\n",
       "      <td>25.572293</td>\n",
       "      <td>1.616771</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>None</td>\n",
       "      <td>False</td>\n",
       "      <td>ground</td>\n",
       "      <td>front</td>\n",
       "      <td>939.692621</td>\n",
       "      <td>197.927305</td>\n",
       "      <td>989.636525</td>\n",
       "      <td>49.932918</td>\n",
       "      <td>0.010986</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>0</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>back</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>3.642228</td>\n",
       "      <td>121.407597</td>\n",
       "      <td>1.661115</td>\n",
       "      <td>119.746482</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>1</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>back</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>3.285173</td>\n",
       "      <td>109.505752</td>\n",
       "      <td>1.088744</td>\n",
       "      <td>108.417008</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>2</td>\n",
       "      <td>False</td>\n",
       "      <td>pvrow</td>\n",
       "      <td>back</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>3.258358</td>\n",
       "      <td>108.611941</td>\n",
       "      <td>1.088193</td>\n",
       "      <td>107.523748</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   pvrow_index shaded line_type surface_side  irradiance_term          q0  \\\n",
       "0            0  False     pvrow        front       766.044443    8.168828   \n",
       "1            1  False     pvrow        front       766.044443    8.173178   \n",
       "2            2  False     pvrow        front       766.044443    8.200154   \n",
       "3         None   True    ground        front         0.000000    5.297125   \n",
       "4         None   True    ground        front         0.000000    5.297799   \n",
       "5         None   True    ground        front         0.000000    5.693934   \n",
       "6         None  False    ground        front       939.692621  195.553701   \n",
       "7         None  False    ground        front       939.692621  195.651303   \n",
       "8         None  False    ground        front       939.692621  197.806118   \n",
       "9         None  False    ground        front       939.692621  197.396142   \n",
       "10        None  False    ground        front       939.692621  193.168551   \n",
       "11        None  False    ground        front       939.692621  193.376337   \n",
       "12        None  False    ground        front       939.692621  197.927305   \n",
       "13           0  False     pvrow         back         0.000000    3.642228   \n",
       "14           1  False     pvrow         back         0.000000    3.285173   \n",
       "15           2  False     pvrow         back         0.000000    3.258358   \n",
       "\n",
       "          qinc  isotropic_term  reflection_term  \n",
       "0   816.882800       47.572225         3.266131  \n",
       "1   817.317825       47.573077         3.700304  \n",
       "2   820.015392       48.657804         5.313145  \n",
       "3    26.485623       24.658496         1.827127  \n",
       "4    26.488993       24.815420         1.673573  \n",
       "5    28.469672       26.933075         1.536597  \n",
       "6   977.768507       37.217601         0.858285  \n",
       "7   978.256514       37.744932         0.818961  \n",
       "8   989.030592       49.286484         0.051487  \n",
       "9   986.980708       47.067908         0.220179  \n",
       "10  965.842753       24.463549         1.686584  \n",
       "11  966.881685       25.572293         1.616771  \n",
       "12  989.636525       49.932918         0.010986  \n",
       "13  121.407597        1.661115       119.746482  \n",
       "14  109.505752        1.088744       108.417008  \n",
       "15  108.611941        1.088193       107.523748  "
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "array_simple.surface_registry[['pvrow_index', 'shaded', 'line_type', \n",
    "                               'surface_side', 'irradiance_term', 'q0', \n",
    "                               'qinc', 'isotropic_term', 'reflection_term']]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We can also use ``calculate_radiosities_perez()`` method, but it requires providing additional inputs from the Perez model"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "## Timeseries calculation of radiosity terms"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### For simple continuous surfaces"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The user can use the function from the ``tools`` module named ``calculate_radiosities_serially_perez()``, which will pre-calculate the necessary inputs from the Perez model using the ``pvlib`` library.<br>\n",
    "The user can also use ``calculate_radiosities_parallel_perez()``, which will run the same calculations but in parallel processes."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Let's create some inputs for the function.\n",
    "<br> PLEASE NOTE THAT THE COLUMN NAMES NEED TO BE EXACTLY THE ONES SHOWN BELOW."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style>\n",
       "    .dataframe thead tr:only-child th {\n",
       "        text-align: right;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: left;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>solar_zenith</th>\n",
       "      <th>solar_azimuth</th>\n",
       "      <th>array_tilt</th>\n",
       "      <th>array_azimuth</th>\n",
       "      <th>dni</th>\n",
       "      <th>dhi</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>2017-08-31 11:00:00</th>\n",
       "      <td>20.0</td>\n",
       "      <td>110.0</td>\n",
       "      <td>10.0</td>\n",
       "      <td>90.0</td>\n",
       "      <td>1000.0</td>\n",
       "      <td>50.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2017-08-31 12:00:00</th>\n",
       "      <td>10.0</td>\n",
       "      <td>140.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>90.0</td>\n",
       "      <td>300.0</td>\n",
       "      <td>500.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                     solar_zenith  solar_azimuth  array_tilt  array_azimuth  \\\n",
       "2017-08-31 11:00:00          20.0          110.0        10.0           90.0   \n",
       "2017-08-31 12:00:00          10.0          140.0         0.0           90.0   \n",
       "\n",
       "                        dni    dhi  \n",
       "2017-08-31 11:00:00  1000.0   50.0  \n",
       "2017-08-31 12:00:00   300.0  500.0  "
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df_inputs = pd.DataFrame(\n",
    "    np.array(\n",
    "        [[20., 110., 10., 90., 1000., 50.],\n",
    "         [10., 140., 0., 90., 300., 500.]]),\n",
    "    columns = ['solar_zenith', 'solar_azimuth', 'array_tilt', 'array_azimuth', 'dni', 'dhi'],\n",
    "    index = pd.DatetimeIndex(\n",
    "        [datetime(2017, 8, 31, 11), datetime(2017, 8, 31, 12)]\n",
    "    )\n",
    ")\n",
    "df_inputs"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "That's all we need to run a calculation"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Progress: || 100.0% Complete\n"
     ]
    }
   ],
   "source": [
    "df_outputs, df_bifacial_gain, df_inputs_perez, df_outputs_segments = (\n",
    "    calculate_radiosities_serially_perez((arguments, df_inputs))\n",
    ")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style>\n",
       "    .dataframe thead tr:only-child th {\n",
       "        text-align: right;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: left;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr>\n",
       "      <th>pvrow</th>\n",
       "      <th colspan=\"10\" halign=\"left\">0</th>\n",
       "      <th>...</th>\n",
       "      <th colspan=\"9\" halign=\"left\">2</th>\n",
       "      <th>array_is_shaded</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>side</th>\n",
       "      <th colspan=\"8\" halign=\"left\">back</th>\n",
       "      <th colspan=\"2\" halign=\"left\">front</th>\n",
       "      <th>...</th>\n",
       "      <th>back</th>\n",
       "      <th colspan=\"8\" halign=\"left\">front</th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>term</th>\n",
       "      <th>circumsolar_term</th>\n",
       "      <th>direct_term</th>\n",
       "      <th>horizon_term</th>\n",
       "      <th>irradiance_term</th>\n",
       "      <th>isotropic_term</th>\n",
       "      <th>q0</th>\n",
       "      <th>qinc</th>\n",
       "      <th>reflection_term</th>\n",
       "      <th>circumsolar_term</th>\n",
       "      <th>direct_term</th>\n",
       "      <th>...</th>\n",
       "      <th>reflection_term</th>\n",
       "      <th>circumsolar_term</th>\n",
       "      <th>direct_term</th>\n",
       "      <th>horizon_term</th>\n",
       "      <th>irradiance_term</th>\n",
       "      <th>isotropic_term</th>\n",
       "      <th>q0</th>\n",
       "      <th>qinc</th>\n",
       "      <th>reflection_term</th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>2017-08-31 11:00:00</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1.64068</td>\n",
       "      <td>1.64068</td>\n",
       "      <td>0.117972</td>\n",
       "      <td>2.80425</td>\n",
       "      <td>93.475</td>\n",
       "      <td>91.7164</td>\n",
       "      <td>30.1646</td>\n",
       "      <td>981.226</td>\n",
       "      <td>...</td>\n",
       "      <td>95.2901</td>\n",
       "      <td>30.1646</td>\n",
       "      <td>981.226</td>\n",
       "      <td>1.64068</td>\n",
       "      <td>1013.03</td>\n",
       "      <td>20.8498</td>\n",
       "      <td>10.3488</td>\n",
       "      <td>1034.88</td>\n",
       "      <td>0.995106</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2017-08-31 12:00:00</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0.0315921</td>\n",
       "      <td>2.49755</td>\n",
       "      <td>83.2516</td>\n",
       "      <td>83.22</td>\n",
       "      <td>293.668</td>\n",
       "      <td>295.442</td>\n",
       "      <td>...</td>\n",
       "      <td>82.0925</td>\n",
       "      <td>293.668</td>\n",
       "      <td>295.442</td>\n",
       "      <td>0</td>\n",
       "      <td>589.11</td>\n",
       "      <td>206.332</td>\n",
       "      <td>7.95442</td>\n",
       "      <td>795.442</td>\n",
       "      <td>-5.68434e-14</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>2 rows  49 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "pvrow                              0                                           \\\n",
       "side                            back                                            \n",
       "term                circumsolar_term direct_term horizon_term irradiance_term   \n",
       "2017-08-31 11:00:00                0           0      1.64068         1.64068   \n",
       "2017-08-31 12:00:00                0           0            0               0   \n",
       "\n",
       "pvrow                                                                 \\\n",
       "side                                                                   \n",
       "term                isotropic_term       q0     qinc reflection_term   \n",
       "2017-08-31 11:00:00       0.117972  2.80425   93.475         91.7164   \n",
       "2017-08-31 12:00:00      0.0315921  2.49755  83.2516           83.22   \n",
       "\n",
       "pvrow                                                  ...        \\\n",
       "side                           front                   ...         \n",
       "term                circumsolar_term direct_term       ...         \n",
       "2017-08-31 11:00:00          30.1646     981.226       ...         \n",
       "2017-08-31 12:00:00          293.668     295.442       ...         \n",
       "\n",
       "pvrow                             2                                            \\\n",
       "side                           back            front                            \n",
       "term                reflection_term circumsolar_term direct_term horizon_term   \n",
       "2017-08-31 11:00:00         95.2901          30.1646     981.226      1.64068   \n",
       "2017-08-31 12:00:00         82.0925          293.668     295.442            0   \n",
       "\n",
       "pvrow                                                                 \\\n",
       "side                                                                   \n",
       "term                irradiance_term isotropic_term       q0     qinc   \n",
       "2017-08-31 11:00:00         1013.03        20.8498  10.3488  1034.88   \n",
       "2017-08-31 12:00:00          589.11        206.332  7.95442  795.442   \n",
       "\n",
       "pvrow                               array_is_shaded  \n",
       "side                                                 \n",
       "term                reflection_term                  \n",
       "2017-08-31 11:00:00        0.995106           False  \n",
       "2017-08-31 12:00:00    -5.68434e-14           False  \n",
       "\n",
       "[2 rows x 49 columns]"
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Show the surface averaged outputs for the PV rows\n",
    "df_outputs"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style>\n",
       "    .dataframe thead tr:only-child th {\n",
       "        text-align: right;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: left;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>0</th>\n",
       "      <th>1</th>\n",
       "      <th>2</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>2017-08-31 11:00:00</th>\n",
       "      <td>0.0902939</td>\n",
       "      <td>0.0888972</td>\n",
       "      <td>0.0938564</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2017-08-31 12:00:00</th>\n",
       "      <td>0.104661</td>\n",
       "      <td>0.0979647</td>\n",
       "      <td>0.103245</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                             0          1          2\n",
       "2017-08-31 11:00:00  0.0902939  0.0888972  0.0938564\n",
       "2017-08-31 12:00:00   0.104661  0.0979647   0.103245"
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Show the bifacial gain results\n",
    "# Note: this can be calculated using df_outputs\n",
    "df_bifacial_gain"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In this case ``df_outputs_segments`` is ``None``"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "None\n"
     ]
    }
   ],
   "source": [
    "print(df_outputs_segments)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### For discretized surfaces"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The user can use a 3rd argument to save the irradiance results of all the discretized elements of the middle tracker"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [],
   "source": [
    "save_segments = (1, 'front')  \n",
    "# save the results for the front surface of the pv row #1 (middle)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Progress: || 100.0% Complete\n"
     ]
    }
   ],
   "source": [
    "df_outputs, df_bifacial_gain, df_inputs_perez, df_outputs_segments = (\n",
    "    calculate_radiosities_serially_perez((arguments_discretize, df_inputs, \n",
    "                                          save_segments))\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The ``df_outputs_segments`` output will be a ``pandas.DataFrame`` containing all the calculated irradiance terms for the different segments of the front surface of the middle PV row (as specified in the inputs), indexed from ``0`` to ``n-1`` (``n`` being the total number of segments)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style>\n",
       "    .dataframe thead tr:only-child th {\n",
       "        text-align: right;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: left;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr>\n",
       "      <th>irradiance_term</th>\n",
       "      <th colspan=\"5\" halign=\"left\">circumsolar_shading_pct</th>\n",
       "      <th colspan=\"5\" halign=\"left\">circumsolar_term</th>\n",
       "      <th>...</th>\n",
       "      <th colspan=\"5\" halign=\"left\">qinc</th>\n",
       "      <th colspan=\"5\" halign=\"left\">reflection_term</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>segment_index</th>\n",
       "      <th>0</th>\n",
       "      <th>1</th>\n",
       "      <th>2</th>\n",
       "      <th>3</th>\n",
       "      <th>4</th>\n",
       "      <th>0</th>\n",
       "      <th>1</th>\n",
       "      <th>2</th>\n",
       "      <th>3</th>\n",
       "      <th>4</th>\n",
       "      <th>...</th>\n",
       "      <th>0</th>\n",
       "      <th>1</th>\n",
       "      <th>2</th>\n",
       "      <th>3</th>\n",
       "      <th>4</th>\n",
       "      <th>0</th>\n",
       "      <th>1</th>\n",
       "      <th>2</th>\n",
       "      <th>3</th>\n",
       "      <th>4</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>2017-08-31 11:00:00</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>30.164599</td>\n",
       "      <td>30.164599</td>\n",
       "      <td>30.164599</td>\n",
       "      <td>30.164599</td>\n",
       "      <td>30.164599</td>\n",
       "      <td>...</td>\n",
       "      <td>1035.059091</td>\n",
       "      <td>1035.057629</td>\n",
       "      <td>1034.959241</td>\n",
       "      <td>1034.871599</td>\n",
       "      <td>1034.796473</td>\n",
       "      <td>1.287879e+00</td>\n",
       "      <td>1.221022e+00</td>\n",
       "      <td>1.065602e+00</td>\n",
       "      <td>9.350708e-01</td>\n",
       "      <td>8.271474e-01</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2017-08-31 12:00:00</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>293.667599</td>\n",
       "      <td>293.667599</td>\n",
       "      <td>293.667599</td>\n",
       "      <td>293.667599</td>\n",
       "      <td>293.667599</td>\n",
       "      <td>...</td>\n",
       "      <td>795.442326</td>\n",
       "      <td>795.442326</td>\n",
       "      <td>795.442326</td>\n",
       "      <td>795.442326</td>\n",
       "      <td>795.442326</td>\n",
       "      <td>-5.684342e-14</td>\n",
       "      <td>-5.684342e-14</td>\n",
       "      <td>-5.684342e-14</td>\n",
       "      <td>-5.684342e-14</td>\n",
       "      <td>-5.684342e-14</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>2 rows  40 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "irradiance_term     circumsolar_shading_pct                      \\\n",
       "segment_index                             0    1    2    3    4   \n",
       "2017-08-31 11:00:00                     0.0  0.0  0.0  0.0  0.0   \n",
       "2017-08-31 12:00:00                     0.0  0.0  0.0  0.0  0.0   \n",
       "\n",
       "irradiance_term     circumsolar_term                                      \\\n",
       "segment_index                      0           1           2           3   \n",
       "2017-08-31 11:00:00        30.164599   30.164599   30.164599   30.164599   \n",
       "2017-08-31 12:00:00       293.667599  293.667599  293.667599  293.667599   \n",
       "\n",
       "irradiance_term                      ...              qinc               \\\n",
       "segment_index                 4      ...                 0            1   \n",
       "2017-08-31 11:00:00   30.164599      ...       1035.059091  1035.057629   \n",
       "2017-08-31 12:00:00  293.667599      ...        795.442326   795.442326   \n",
       "\n",
       "irradiance_term                                            reflection_term  \\\n",
       "segment_index                  2            3            4               0   \n",
       "2017-08-31 11:00:00  1034.959241  1034.871599  1034.796473    1.287879e+00   \n",
       "2017-08-31 12:00:00   795.442326   795.442326   795.442326   -5.684342e-14   \n",
       "\n",
       "irradiance_term                                                              \n",
       "segment_index                   1             2             3             4  \n",
       "2017-08-31 11:00:00  1.221022e+00  1.065602e+00  9.350708e-01  8.271474e-01  \n",
       "2017-08-31 12:00:00 -5.684342e-14 -5.684342e-14 -5.684342e-14 -5.684342e-14  \n",
       "\n",
       "[2 rows x 40 columns]"
      ]
     },
     "execution_count": 25,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df_outputs_segments"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 2",
   "language": "python",
   "name": "python2"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 2
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython2",
   "version": "2.7.14"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 1
}
