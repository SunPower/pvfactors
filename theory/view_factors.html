

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>View Factors &mdash; pvfactors 1.5.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Mathematical Model" href="problem_formulation.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> pvfactors
          

          
            
            <img src="../_static/logo_small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">Main concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Theory</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">View Factors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#theory">Theory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#application">Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-non-diffuse-reflection-losses">Adding non-diffuse reflection losses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="problem_formulation.html">Mathematical Model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What’s New</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pvfactors</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          



















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Theory</a> &raquo;</li>
        
      <li>View Factors</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <!-- User defined GitHub URL -->
              <a href="https://github.com/SunPower/pvfactors/" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="view-factors">
<span id="view-factors-theory"></span><h1>View Factors<a class="headerlink" href="#view-factors" title="Permalink to this headline">¶</a></h1>
<div class="section" id="theory">
<h2>Theory<a class="headerlink" href="#theory" title="Permalink to this headline">¶</a></h2>
<p>The view factors, also called configuration factors, come from the definition of the directional spectral radiative power of a differential area.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/differential_areas.png"><img alt="../_images/differential_areas.png" src="../_images/differential_areas.png" style="width: 20%;" /></a>
</div>
<div class="line-block">
<div class="line">Let’s take the example of black body surfaces, and then extrapolate the results to more general ones.</div>
<div class="line">For a black body differential area <span class="math notranslate nohighlight">\(dA_1\)</span>, we can write that the radiative power emitted to another black body differential area <span class="math notranslate nohighlight">\(dA_2\)</span> is:</div>
</div>
<div class="math notranslate nohighlight">
\[d^2 Q_{{\lambda}, d1-d2}{\;}d{\lambda} = i_{{\lambda},b,1}{\;}d{\lambda}{\;}d{\omega}_1{\;}dA_{1, projected}\]</div>
<div class="line-block">
<div class="line">where:</div>
<div class="line">* <span class="math notranslate nohighlight">\(d^2 Q_{{\lambda}, d1-d2}\)</span> is the spectral radiative power from <span class="math notranslate nohighlight">\(dA_1\)</span> to <span class="math notranslate nohighlight">\(dA_2\)</span></div>
<div class="line">* <span class="math notranslate nohighlight">\(i_{{\lambda},b,1}\)</span> is the blackbody spectral intensity from <span class="math notranslate nohighlight">\(dA_1\)</span></div>
<div class="line">* <span class="math notranslate nohighlight">\({\lambda}\)</span> is the wavelength</div>
<div class="line">* <span class="math notranslate nohighlight">\(d{\omega}_1\)</span> is the solid angle from <span class="math notranslate nohighlight">\(dA_1\)</span> to <span class="math notranslate nohighlight">\(dA_2\)</span></div>
<div class="line">* <span class="math notranslate nohighlight">\(dA_{1, projected}\)</span> is the projected area <span class="math notranslate nohighlight">\(dA_1\)</span> onto the <code class="docutils literal notranslate"><span class="pre">S</span></code> direction</div>
</div>
<p>We can then integrate over <span class="math notranslate nohighlight">\({\lambda}\)</span> for a black body and rearrange:</p>
<div class="math notranslate nohighlight">
\[d^2 Q_{d1-d2}{\;} = {\frac{{\sigma}{\;}T_1^4}{{\pi}}}{\;}d{\omega}_1{\;}cos{\theta}_1{\;}dA_1\]</div>
<p>Then:</p>
<div class="math notranslate nohighlight">
\[d^2 Q_{d1-d2}{\;} = {\frac{{\sigma}{\;}T_1^4}{{\pi}}}{\;}{\frac{cos{\theta}_2{\;}dA_2}{S^2}}{\;}cos{\theta}_1{\;}dA_1\]</div>
<p>And finally:</p>
<div class="math notranslate nohighlight">
\[{\frac{d^2 Q_{d1-d2}}{dA_1}} = {\sigma}{\;}T_1^4 {\frac{cos{\theta}_2{\;}cos{\theta}_1}{{\pi}{\;}S^2}}{\;}dA_2\]</div>
<p>The view factor from the differential area <span class="math notranslate nohighlight">\(dA_1\)</span> to the differential area <span class="math notranslate nohighlight">\(dA_2\)</span> is then defined as:</p>
<div class="math notranslate nohighlight">
\[d^2F_{d1-d2}{\;} = {\frac{cos{\theta}_2{\;}cos{\theta}_1}{{\pi}{\;}S^2}}{\;}dA_2\]</div>
<p>And for two finite areas <span class="math notranslate nohighlight">\(A_1\)</span> and <span class="math notranslate nohighlight">\(A_2\)</span>:</p>
<div class="math notranslate nohighlight">
\[F_{1-2}{\;} = {\frac{1}{A_1}}\int_{A_1}\int_{A_2}d^2F_{d1-d2}{\;}dA_1{\;} = {\frac{1}{A_1}}\int_{A_1}\int_{A_2}{\frac{cos{\theta}_2{\;}cos{\theta}_1}{{\pi}{\;}S^2}}{\;}dA_2{\;}dA_1\]</div>
<p>We can also note that by reciprocity:</p>
<div class="math notranslate nohighlight">
\[A_1{\;}F_{1-2} = A_2{\;}F_{2-1}\]</div>
<div class="line-block">
<div class="line">This approach also holds for diffuse surfaces, whose optical properties don’t depend on the direction of the rays.</div>
<div class="line">We can understand the view factor from a surface <span class="math notranslate nohighlight">\(A_1\)</span> to a surface <span class="math notranslate nohighlight">\(A_2\)</span> as the fraction of the hemisphere around <span class="math notranslate nohighlight">\(A_1\)</span> that is occupied by <span class="math notranslate nohighlight">\(A_2\)</span>.</div>
</div>
</div>
<div class="section" id="application">
<h2>Application<a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">We will be using configuration factors in the case of 2D geometries, which simplifies the calculations. The 2D assumption is made because the tracker rows considered will be fairly long, and the edge effects will therefore have less impact.</div>
<div class="line">Also, instead of doing the numerical integration of the double integral representing the view factor, we will systematically try to use analytical solutions of those integrals from tables.</div>
<div class="line">Here are links describing some view factors relevant to PV array geometries.</div>
</div>
<ul class="simple">
<li><p>View factor of a wedge: <a class="reference external" href="http://www.thermalradiation.net/sectionc/C-5.html">http://www.thermalradiation.net/sectionc/C-5.html</a></p></li>
<li><p>View factor of parallel planes: <a class="reference external" href="http://www.thermalradiation.net/sectionc/C-2a.htm">http://www.thermalradiation.net/sectionc/C-2a.htm</a></p></li>
<li><p>View factor of angled planes: <a class="reference external" href="http://www.thermalradiation.net/sectionc/C-5a.html">http://www.thermalradiation.net/sectionc/C-5a.html</a></p></li>
<li><p>The Hottel method is also widely used in the model</p></li>
</ul>
</div>
<div class="section" id="adding-non-diffuse-reflection-losses">
<h2>Adding non-diffuse reflection losses<a class="headerlink" href="#adding-non-diffuse-reflection-losses" title="Permalink to this headline">¶</a></h2>
<p>For the derivation shown above, we assumed that the surfaces were diffuse. But as shown in <a class="footnote-reference brackets" href="#bifacialvf-paper" id="id1">1</a>, it is possible to add an approximation of non-diffuse effects by calculating absorption losses that are function of the angle-of-incidence (AOI) of the light.</p>
<p>If we’re interested in calculating the <strong>absorbed</strong> irradiance coming from an infinite strip to an infinitesimal surface, we can calculate a view factor derated by AOI losses by starting with the formula derived in <a class="reference external" href="http://www.thermalradiation.net/sectionb/B-71.html">http://www.thermalradiation.net/sectionb/B-71.html</a>.</p>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../_images/AOI_strips.png"><img alt="../_images/AOI_strips.png" src="../_images/AOI_strips.png" style="width: 40%;" /></a>
<p class="caption"><span class="caption-text">Fig. 1: Schematics illustrating view factor formula from dA1 to infinite strips</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The view factor from the infinitesimal surface <span class="math notranslate nohighlight">\(dA_1\)</span> to the infinite strip <span class="math notranslate nohighlight">\(A_{2,1}\)</span> is equal to:</p>
<div class="math notranslate nohighlight">
\[dF_{dA_{1}-A_{2,1}}{\;} = {\frac{1}{2}}{\;}({cos{\theta}_2{\;}-{\;}cos{\theta}_1})\]</div>
<p>For this small view of the strip, we can assume that a given AOI modifier function (<span class="math notranslate nohighlight">\(f(AOI)\)</span>), which represents reflection losses, is constant. Such that:</p>
<div class="math notranslate nohighlight">
\[dF_{dA_{1}-A_{2,1},AOI}{\;} = {\frac{1}{2}}{\;}f(AOI){\;}({cos{\theta}_2{\;}-{\;}cos{\theta}_1})\]</div>
<p>We can then calculate the view factor derated by AOI losses from the infinitesimal surface <span class="math notranslate nohighlight">\(dA_{1}\)</span> to the whole surface <span class="math notranslate nohighlight">\(A_{2}\)</span> by summing up the values for all the small strips constituting that surface. Such that:</p>
<div class="math notranslate nohighlight">
\[dF_{dA_{1}-A_{2},AOI}{\;} = {\sum}_{j=1}^{3}{\;}dF_{dA_{1}-A_{2,j},AOI}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since this formula was derived for “infinitesimal” surfaces, in practice we can cut up the PV row sides into “small” segments to make this approximation more valid.</p>
</div>
<dl class="footnote brackets">
<dt class="label" id="bifacialvf-paper"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Marion, B., MacAlpine, S., Deline, C., Asgharzadeh, A., Toor, F., Riley, D., Stein, J. and Hansen, C., 2017, June. A practical irradiance model for bifacial PV modules. In 2017 IEEE 44th Photovoltaic Specialist Conference (PVSC) (pp. 1537-1542). IEEE.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="problem_formulation.html" class="btn btn-neutral float-right" title="Mathematical Model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="intro.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016, SunPower Corporation.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>